{"ast":null,"code":"import _objectSpread from\"/Users/dan/Documents/Development/ReactNodeTest/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/dan/Documents/Development/ReactNodeTest/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import _ from'lodash';import{connect}from'react-redux';import{initiateGetJobs}from'../actions/jobs';import{resetErrors}from'../actions/errors';import Header from'./Header';import Search from'./Search';import Results from'./Results';import JobDetails from'./JobDetails';import JobsContext from'../context/jobs';import Loader from'./Loader';var HomePage=function HomePage(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),results=_useState2[0],setResults=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState(-1),_useState8=_slicedToArray(_useState7,2),jobId=_useState8[0],setJobId=_useState8[1];var _useState9=useState('home'),_useState10=_slicedToArray(_useState9,2),page=_useState10[0],setPage=_useState10[1];var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),pageNumber=_useState12[0],setPageNumber=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),selection=_useState14[0],setSelection=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),hideLoadMore=_useState16[0],setHideLoadMore=_useState16[1];useEffect(function(){setResults(props.jobs);},[props.jobs]);useEffect(function(){setErrors(props.errors);},[props.errors]);var loadJobs=function loadJobs(selection){var dispatch=props.dispatch;var description=selection.description,location=selection.location,full_time=selection.full_time,_selection$page=selection.page,page=_selection$page===void 0?1:_selection$page;var isLoadMore=false;if(selection.hasOwnProperty('page')){isLoadMore=true;}dispatch(resetErrors());setIsLoading(true);dispatch(initiateGetJobs({description:description,location:location,full_time:full_time,page:page},isLoadMore)).then(function(response){if(response&&response.jobs.length===0){setHideLoadMore(true);}else{setHideLoadMore(false);}setIsLoading(false);}).catch(function(){return setIsLoading(false);});};var handleSearch=function handleSearch(selection){loadJobs(selection);setSelection(selection);};var handleItemClick=function handleItemClick(jobId){setPage('details');setJobId(jobId);};var handleResetPage=function handleResetPage(){setPage('home');};var handleLoadMore=function handleLoadMore(){loadJobs(_objectSpread({},selection,{page:pageNumber+1}));setPageNumber(pageNumber+1);};var jobDetails={};if(page==='details'){jobDetails=results.find(function(job){return job.id===jobId;});}var value={results:results,details:jobDetails,onSearch:handleSearch,onItemClick:handleItemClick,onResetPage:handleResetPage};return/*#__PURE__*/React.createElement(JobsContext.Provider,{value:value},/*#__PURE__*/React.createElement(Loader,{show:isLoading},\"Loading...\"),/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(page==='details'&&'hide')},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Search,null),!_.isEmpty(errors)&&/*#__PURE__*/React.createElement(\"div\",{className:\"errorMsg\"},/*#__PURE__*/React.createElement(\"p\",null,errors.error)),/*#__PURE__*/React.createElement(Results,null),results.length>0&&_.isEmpty(errors)&&!hideLoadMore&&/*#__PURE__*/React.createElement(\"div\",{className:\"load-more\",onClick:isLoading?null:handleLoadMore},/*#__PURE__*/React.createElement(\"button\",{disabled:isLoading,className:\"\".concat(isLoading?'disabled':'')},\"Load More Jobs\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(page==='home'&&'hide')},page==='details'&&/*#__PURE__*/React.createElement(JobDetails,null)));};var mapStateToProps=function mapStateToProps(state){return{jobs:state.jobs,errors:state.errors};};export default connect(mapStateToProps)(HomePage);","map":{"version":3,"sources":["/Users/dan/Documents/Development/ReactNodeTest/src/components/HomePage.js"],"names":["React","useState","useEffect","_","connect","initiateGetJobs","resetErrors","Header","Search","Results","JobDetails","JobsContext","Loader","HomePage","props","results","setResults","errors","setErrors","isLoading","setIsLoading","jobId","setJobId","page","setPage","pageNumber","setPageNumber","selection","setSelection","hideLoadMore","setHideLoadMore","jobs","loadJobs","dispatch","description","location","full_time","isLoadMore","hasOwnProperty","then","response","length","catch","handleSearch","handleItemClick","handleResetPage","handleLoadMore","jobDetails","find","job","id","value","details","onSearch","onItemClick","onResetPage","isEmpty","error","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { initiateGetJobs } from '../actions/jobs';\nimport { resetErrors } from '../actions/errors';\nimport Header from './Header';\nimport Search from './Search';\nimport Results from './Results';\nimport JobDetails from './JobDetails';\nimport JobsContext from '../context/jobs';\nimport Loader from './Loader';\n\nconst HomePage = (props) => {\n  const [results, setResults] = useState([]);\n  const [errors, setErrors] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [jobId, setJobId] = useState(-1);\n  const [page, setPage] = useState('home');\n  const [pageNumber, setPageNumber] = useState(1);\n  const [selection, setSelection] = useState(null);\n  const [hideLoadMore, setHideLoadMore] = useState(false);\n\n  useEffect(() => {\n    setResults(props.jobs);\n  }, [props.jobs]);\n\n  useEffect(() => {\n    setErrors(props.errors);\n  }, [props.errors]);\n\n  const loadJobs = (selection) => {\n    const { dispatch } = props;\n    const { description, location, full_time, page = 1 } = selection;\n    let isLoadMore = false;\n    if (selection.hasOwnProperty('page')) {\n      isLoadMore = true;\n    }\n    dispatch(resetErrors());\n    setIsLoading(true);\n    dispatch(\n      initiateGetJobs({ description, location, full_time, page }, isLoadMore)\n    )\n      .then((response) => {\n        if (response && response.jobs.length === 0) {\n          setHideLoadMore(true);\n        } else {\n          setHideLoadMore(false);\n        }\n        setIsLoading(false);\n      })\n      .catch(() => setIsLoading(false));\n  };\n\n  const handleSearch = (selection) => {\n    loadJobs(selection);\n    setSelection(selection);\n  };\n\n  const handleItemClick = (jobId) => {\n    setPage('details');\n    setJobId(jobId);\n  };\n\n  const handleResetPage = () => {\n    setPage('home');\n  };\n\n  const handleLoadMore = () => {\n    loadJobs({ ...selection, page: pageNumber + 1 });\n    setPageNumber(pageNumber + 1);\n  };\n\n  let jobDetails = {};\n  if (page === 'details') {\n    jobDetails = results.find((job) => job.id === jobId);\n  }\n\n  const value = {\n    results,\n    details: jobDetails,\n    onSearch: handleSearch,\n    onItemClick: handleItemClick,\n    onResetPage: handleResetPage\n  };\n\n  return (\n    <JobsContext.Provider value={value}>\n      <Loader show={isLoading}>Loading...</Loader>\n      <div className={`${page === 'details' && 'hide'}`}>\n        <Header />\n        <Search />\n        {!_.isEmpty(errors) && (\n          <div className=\"errorMsg\">\n            <p>{errors.error}</p>\n          </div>\n        )}\n        <Results />\n        {results.length > 0 && _.isEmpty(errors) && !hideLoadMore && (\n          <div\n            className=\"load-more\"\n            onClick={isLoading ? null : handleLoadMore}\n          >\n            <button\n              disabled={isLoading}\n              className={`${isLoading ? 'disabled' : ''}`}\n            >\n              Load More Jobs\n            </button>\n          </div>\n        )}\n      </div>\n      <div className={`${page === 'home' && 'hide'}`}>\n        {page === 'details' && <JobDetails />}\n      </div>\n    </JobsContext.Provider>\n  );\n};\n\nHomePage.propTypes = {\n  jobs: PropTypes.array.isRequired,\n  errors: PropTypes.object\n};\n\nconst mapStateToProps = (state) => ({\n  jobs: state.jobs,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps)(HomePage);\n"]},"metadata":{},"sourceType":"module"}