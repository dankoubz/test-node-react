{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dan/Documents/Development/ReactNodeTest/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dan/Documents/Development/ReactNodeTest/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import moment from'moment';import{BASE_API_URL}from'../utils/constants';import{setErrors}from'./errors';export var initiateGetJobs=function initiateGetJobs(data,isLoadMore){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var description,full_time,location,page,jobs,sortedJobs;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;description=data.description,full_time=data.full_time,location=data.location,page=data.page;description=description?encodeURIComponent(description):'';location=location?encodeURIComponent(location):'';full_time=full_time?'&full_time=true':'';if(page){page=parseInt(page);page=isNaN(page)?'':\"&page=\".concat(page);}_context.next=8;return axios.get(\"\".concat(BASE_API_URL,\"/jobs?description=\").concat(description,\"&location=\").concat(location).concat(full_time).concat(page));case 8:jobs=_context.sent;// const jobs = await axios.get('./jobs.json');\nsortedJobs=jobs.data.sort(function(a,b){return moment(new Date(b.created_at))-moment(new Date(a.created_at));});if(!isLoadMore){_context.next=14;break;}return _context.abrupt(\"return\",dispatch(setLoadMoreJobs(sortedJobs)));case 14:return _context.abrupt(\"return\",dispatch(setJobs(sortedJobs)));case 15:_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);_context.t0.response&&dispatch(setErrors(_context.t0.response.data));case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,17]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var setJobs=function setJobs(jobs){return{type:'SET_JOBS',jobs:jobs};};export var setLoadMoreJobs=function setLoadMoreJobs(jobs){return{type:'LOAD_MORE_JOBS',jobs:jobs};};","map":{"version":3,"sources":["/Users/dan/Documents/Development/ReactNodeTest/src/actions/jobs.js"],"names":["axios","moment","BASE_API_URL","setErrors","initiateGetJobs","data","isLoadMore","dispatch","description","full_time","location","page","encodeURIComponent","parseInt","isNaN","get","jobs","sortedJobs","sort","a","b","Date","created_at","setLoadMoreJobs","setJobs","response","type"],"mappings":"+PAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OAASC,YAAT,KAA6B,oBAA7B,CACA,OAASC,SAAT,KAA0B,UAA1B,CAEA,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,IAAD,CAAOC,UAAP,CAAsB,CACnD,+FAAO,iBAAOC,QAAP,0LAEGC,WAFH,CAE8CH,IAF9C,CAEGG,WAFH,CAEgBC,SAFhB,CAE8CJ,IAF9C,CAEgBI,SAFhB,CAE2BC,QAF3B,CAE8CL,IAF9C,CAE2BK,QAF3B,CAEqCC,IAFrC,CAE8CN,IAF9C,CAEqCM,IAFrC,CAIHH,WAAW,CAAGA,WAAW,CAAGI,kBAAkB,CAACJ,WAAD,CAArB,CAAqC,EAA9D,CACAE,QAAQ,CAAGA,QAAQ,CAAGE,kBAAkB,CAACF,QAAD,CAArB,CAAkC,EAArD,CACAD,SAAS,CAAGA,SAAS,CAAG,iBAAH,CAAuB,EAA5C,CAEA,GAAIE,IAAJ,CAAU,CACRA,IAAI,CAAGE,QAAQ,CAACF,IAAD,CAAf,CACAA,IAAI,CAAGG,KAAK,CAACH,IAAD,CAAL,CAAc,EAAd,iBAA4BA,IAA5B,CAAP,CACD,CAXE,sBAagBX,CAAAA,KAAK,CAACe,GAAN,WACdb,YADc,8BACmBM,WADnB,sBAC2CE,QAD3C,SACsDD,SADtD,SACkEE,IADlE,EAbhB,QAaGK,IAbH,eAgBH;AACMC,UAjBH,CAiBgBD,IAAI,CAACX,IAAL,CAAUa,IAAV,CACjB,SAACC,CAAD,CAAIC,CAAJ,QACEnB,CAAAA,MAAM,CAAC,GAAIoB,CAAAA,IAAJ,CAASD,CAAC,CAACE,UAAX,CAAD,CAAN,CAAiCrB,MAAM,CAAC,GAAIoB,CAAAA,IAAJ,CAASF,CAAC,CAACG,UAAX,CAAD,CADzC,EADiB,CAjBhB,KAsBChB,UAtBD,0DAuBMC,QAAQ,CAACgB,eAAe,CAACN,UAAD,CAAhB,CAvBd,0CAyBMV,QAAQ,CAACiB,OAAO,CAACP,UAAD,CAAR,CAzBd,2FA4BH,YAAMQ,QAAN,EAAkBlB,QAAQ,CAACJ,SAAS,CAAC,YAAMsB,QAAN,CAAepB,IAAhB,CAAV,CAA1B,CA5BG,qEAAP,+DA+BD,CAhCM,CAkCP,MAAO,IAAMmB,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACR,IAAD,QAAW,CAChCU,IAAI,CAAE,UAD0B,CAEhCV,IAAI,CAAJA,IAFgC,CAAX,EAAhB,CAKP,MAAO,IAAMO,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACP,IAAD,QAAW,CACxCU,IAAI,CAAE,gBADkC,CAExCV,IAAI,CAAJA,IAFwC,CAAX,EAAxB","sourcesContent":["import axios from 'axios';\nimport moment from 'moment';\nimport { BASE_API_URL } from '../utils/constants';\nimport { setErrors } from './errors';\n\nexport const initiateGetJobs = (data, isLoadMore) => {\n  return async (dispatch) => {\n    try {\n      let { description, full_time, location, page } = data;\n\n      description = description ? encodeURIComponent(description) : '';\n      location = location ? encodeURIComponent(location) : '';\n      full_time = full_time ? '&full_time=true' : '';\n\n      if (page) {\n        page = parseInt(page);\n        page = isNaN(page) ? '' : `&page=${page}`;\n      }\n\n      const jobs = await axios.get(\n        `${BASE_API_URL}/jobs?description=${description}&location=${location}${full_time}${page}`\n      );\n      // const jobs = await axios.get('./jobs.json');\n      const sortedJobs = jobs.data.sort(\n        (a, b) =>\n          moment(new Date(b.created_at)) - moment(new Date(a.created_at))\n      );\n\n      if (isLoadMore) {\n        return dispatch(setLoadMoreJobs(sortedJobs));\n      } else {\n        return dispatch(setJobs(sortedJobs));\n      }\n    } catch (error) {\n      error.response && dispatch(setErrors(error.response.data));\n    }\n  };\n};\n\nexport const setJobs = (jobs) => ({\n  type: 'SET_JOBS',\n  jobs\n});\n\nexport const setLoadMoreJobs = (jobs) => ({\n  type: 'LOAD_MORE_JOBS',\n  jobs\n});\n"]},"metadata":{},"sourceType":"module"}